- [池建强](https://www.amazon.cn/s/ref=as_li_ss_tl?_encoding=UTF8&camp=536&creative=3132&field-keywords=MacTalk%C2%B7%E4%BA%BA%E7%94%9F%E5%85%83%E7%BC%96%E7%A8%8B&linkCode=ur2&tag=llll1-23&url=search-alias%3Dbooks)
- 21 条标注
- ## Mac Tips
    - Mac提供了非常简单易用的Internet共享功能，可以作为一个轻量级的家庭无线路由使用。只要你的Mac能够上网，那么Phone和Pad等设备就都可以通过Wi-Fi共享Mac的网络，实现无线上网。具体的设置非常简单，打开“系统偏好设置”→“共享”→“互联网共享”，选择共享源（网卡或AirPort），并设置Wi-Fi的名称、密码、安全级别等属性，最后勾选左侧列表的“互联网共享”，根据提示操作即可。
    - 创建智能文件夹Finder提供了智能文件夹的功能，简单来说就是固化你的搜索条件，并形成文件夹存放在左侧边栏。例如你想建一个文件大小大于1G的智能文件夹，使用快捷键option+command+n呼出新建智能文件夹界面，单击最右侧的加号，在条件选择第一栏选择“大小”，第二栏选择“大于”，第三栏输入“1G”，你就可以看到你的Mac上文件大于1G的列表，单击“存储”，命名后该文件夹就会出现在左侧边栏。
    - 96.文件比较◆对于单个文件的比较，一般使用diff或vimdiff就可以了，比如：vimdiff destfile.txt sourcefile.txt vim会非常清晰地显示出文件的不同，还有很多快捷方式帮助你查看和操作文件，这个命令比较适合命令行爱好者。◆对于大批量文件的比较，还是图形化比较工具更合适一些。OS X自带了FileMerge比较工具，可以满足部分需求，但对于中文编码文件或大文件经常会崩溃，很奇怪Apple一直不解决这个问题。◆推荐一款收费软件：VisualDiffer（25元），UI、功能和稳定性都非常不错，实在是居家旅行、代码比较、查找问题的必备利器
        - Finder的宽度Finder是OS X的默认文件管理器，它提供了多种显示方式，包括图标、列表、分栏和Cover Flow。其中分栏最为常用，通过键盘的方向键浏览多层级的文件非常方便。不过每个分栏的宽度都是系统默认宽度，如何改变这个默认宽度呢？用鼠标拖动分栏线时同时按住option键，这个默认宽度就随之改变了。
    - 123.Spotlight搜索时文件的定位用Spotlight搜索的时候，搜到文件时，我们有时候会需要打开该文件所在的文件夹，这时候按住command*键，单击文件即可打开Finder，并定位到该文件所在文件夹。
- ## 程序员与编程
    - 具备元编程的语言就具备更强大的操控自己的能力，可以自省，可以反射，可以动态改变和控制自己；具备人生元编程能力的人，同样有自省能力，随时检查和控制自身的情绪和行为，思考自己的想法，改变大脑的动机。
    - 在开始讲Linux王国的臣民之前，先介绍一下王国中最牛的主：root，它不翻译为“根”，也不叫“管理员”，而是被尊称为“超级用户”，是不是觉得高端霸气？
    - root不仅能够管理用户，还能管理文件系统、进程、设备、网络、通信、协议等，总之他就像站在神山上的神祗，俯视着芸芸众生，看着数据信息在软件和硬件之间川流不息，时不时地做一些计划性干预，如果有人想超越系统的规则，他就能让你消失得像从来没有存在过。
    - 以root开篇，下面我们聊聊Linux的文件系统和索引节点。
    - Linux的文件系统本身是比较复杂的，仅ext2、ext3和ext4就得解释好几天，本文的重点不在于此，所以简单介绍一下。文件系统主要是用来保存文件和相关结构的，让文件存储更安全、更快、更容易检索、能支持更大的物理介质等。在Linux系统中，每个磁盘分区都可以看做一个文件系统，每个系统都有自己的目录结构，Linux会把这些分区按照一定的方式组织成统一的目录结构，方便用户访问。但是每个分区上的文件系统都是独立的，可以采用不容的文件格式，就像一国两制一样，虽然统一了，但是是自治的。
    - 有了文件系统，如何管理文件呢？这就引出了索引节点的概念——inode。每个文件都有一个inode，就像我们每个人都有身份证号一样，
    - 但inode是每个文件与生俱来的，一创建就有了，它记录了文件的元信息，比如文件大小、创建者、时间戳、权限、连接数等内容。
    - 所以在Linux/Unix中，文件名称只是文件的一个属性，叫别名也好，叫绰号也罢，仅为了方便用户记忆和使用，但系统内部并不需要用文件名来定为文件位置，这样处理最直观的好处就是，你可以对正在使用的文件改名，换目录，甚至放到废纸篓，都不会影响当前文件的使用，这在Windows里是无法想象的。比如你打开个Word文件，然后对其进行重命名操作，Windows会告诉你门儿都没有，关闭文件先！但在Mac里就毫无压力，因为Mac的操作系统同样采用了inode的设计。
    - inode不一样，它就像你的指纹，属于文件的一部分并定义文件，这就像人生元编程一样，有了“元”的意味。inode由一个数据结构组成，主要包含这样一些字段： i_hash i_list i_sb_list i_dentry i_ino i_count i_mode i_nlink i_uid ...这些字段记录了文件的几乎所有信息，比如链表指针、索引节点号、引用计数器、文件权限、硬链接数、文件所有者标识等，一共有几十个。
    - 如果你的系统里小文件非常多的话，那么完全有可能发生这样的情况：在磁盘空间还有剩余的时候，不能创建文件。这时候就要用df-iH命令看一下是否inode对象已经把索引节点区占满了。一旦无法创建inode，无论是文件还是目录，都将无法创建！
    - Unix/Linux系统中有很多种文件类型，注意，这里的文件类型不是指mp4，pdf，html这样人所共知的类型，所有这类文件都被归为普通文件，每个普通文件具备一个唯一的inode对象，可以根据访问权限查看、更改和删除这些普通文件。
    - 无论是Unix还是Linux，都是相当文艺范儿的。普通的说完了，就该是文艺的了，它就是大名鼎鼎的目录文件（directory file）。这个概念对于用惯Windows的用户来说不太容易理解，文件是文件，目录是目录，岂可混为一谈？好吧，它文艺就文艺在这里了。
    - 在人类的克隆技术还没那么完美的情况下，人做为一个独立的个体立于天地间，没有副本，没有替身，没有快捷方式，没有还血仙丹，一旦死亡，这个人就算了结了，在现实世界中被抹掉了。在Linux的世界里，大部分文件也是类似的待遇，一旦文件被删除，文件相关的inode信息都会被抹掉，文件占用的磁盘空间也会被释放，这种情况下文件名和inode是一对一的。
    - 硬链接基于inode技术，Linux允许多个文件名同时指向一个inode。好处就是，我们可以用不同的文件名去访问同一个文件，每次操作对文件内容的影响会波及所有“副本”，删除掉一个“副本”，不会影响其他文件。增加一个硬链接文件，仅仅是inode里的“Links”属性值加1，删除一个硬链接文件，属性值减1。只有“Links”的值为0时，文件才会被彻底删除，回收其占用的空间。
    - 硬链接的应用场景比较广泛，比如多人修改同一个文件、重要文件备份、文件更新、节省磁盘空间等。这些方便的特性都源于inode的设计思想。
    - 软连接软链接理解起来比较容易，类似Windows系统中的快捷方式。软链接会创建新的inode，inode里主要记录了源文件的路径。当访问软链接文件时，系统会帮你自动指向源文件，无论你操作的是源文件，还是软链接文件，其实你最终操作的都是源文件，源文件删除了，软连接文件就成了无本之木，也就毫无意义，强制访问的后果就是No such file or directory。
